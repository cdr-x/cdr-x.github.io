<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Noto Sans Mono&display=swap" rel="stylesheet">
    <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
    <title>cdr-x | Linktree</title>
    <style>
      /* Global */
      :root {
        --background-color: #1a1a2e;
        --container-bg: rgba(26, 26, 46, 0.85);
        --cycle-color: #4b5dfa;
        --text-color: #e2e8f0;
        --accent-color: #4b5dfa;
      }
      body {
        font-family: 'Inter', sans-serif;
        background: #1a1a2e;
        margin: 0;
        overflow: hidden;
        height: 100vh;
        position: relative;
      }
      /* Fixed background - doesn't scale with zoom wrapper */
      #ascii-bg {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: -1;
        transform: translateZ(0);
        will-change: transform;
      }
      /* Zoom wrapper for perfect viewport fit */
      .zoom-wrapper {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 2rem;
        box-sizing: border-box;
        z-index: 1;
        transition: transform 0.3s ease-out;
        transform-origin: center;
      }
      .container {
        background: var(--container-bg);
        border: 1px solid var(--cycle-color);
        margin-left: auto;
        margin-right: auto;
        padding-top: 3rem;
        padding-bottom: 3rem;
        max-width: 28rem;
        width: 100%;
        border-radius: 0.5rem;
        box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        position: relative;
        min-height: 42rem;
      }
      .container:hover {
        animation: cycleColor 1s infinite;
      }
      .profile {
        text-align: center;
      }
      .profile img {
        --cycle-color: #4b5dfa;
        box-shadow: 0 0 0 2px var(--cycle-color);
        transition: transform 0.3s ease;
        border-radius: 9999px;
        width: 8rem;
        height: 8rem;
        margin-left: auto;
        margin-right: auto;
      }
      .profile img:hover {
        animation: cycleColor 1s infinite, pulse 1.5s infinite;
      }
      .profile h1 {
        font-size: 1.875rem;
        font-weight: 700;
        margin-top: 1rem;
        color: #ffffff;
      }
      .profile p {
        color: #9ca3af;
      }
      .links {
        margin-top: 2rem;
        padding-left: 1rem;
        padding-right: 1rem;
      }
      .links a {
        background: #2b2b4a;
        color: var(--text-color);
        --cycle-color: #4b5dfa;
        border: 1px solid var(--cycle-color);
        position: relative;
        overflow: hidden;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 1rem;
        border-radius: 0.25rem;
        transition: transform 0.3s ease;
      }
      .links a:hover {
        background: #4b5dfa;
        color: #ffffff;
        animation: cycleColor 2s infinite;
        transform: scale(1.05);
      }
      .links a:active::after {
        content: '';
        position: absolute;
        top: 50%;
        left: 50%;
        width: 100%;
        height: 100%;
        background: rgba(74, 222, 128, 0.3);
        transform: translate(-50%, -50%) scale(0);
        animation: glitchRipple 0.5s ease-out;
      }
      .links a + a {
        margin-top: 1rem;
      }
      .links a ion-icon {
        font-size: 2rem;
      }
      .links a span {
        margin-left: 0.5rem;
      }
      /* Animation classes */
      .bg-cycle {
        animation: cycleBg 0.8s;
      }
      .icon-cycle {
        animation: colorCycle 0.8s;
      }
      .click-bg {
        animation: cycleBg 0.2s;
      }
      @keyframes pulse {
        0%, 100% { transform: scale(1); }
        50% { transform: scale(1.05); }
      }
      @keyframes glitchRipple {
        0% { transform: translate(-50%, -50%) scale(0); opacity: 1; }
        100% { transform: translate(-50%, -50%) scale(2); opacity: 0; }
      }
      .zoom-wrapper.loaded {
        transition: transform 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
      }
    </style>
  </head>
  <body>
    <pre id="asciiArt" style="display: none;">
╔═╦═╦═╦═╗ ╔═╦═╦═╦═╦═╦═╦═╗═══╦═══╦═
║ ░<>░░ ║ ║ ┌─┼─┐ │ │ │ │
║ <>░░ (║░░║)│▒│ │ │ │ │ ◉
║ ░╔═══╗║ ║ ├═┼═┼═┼═┼═┼═┼═┬═┼═┬═┼═
║ ░║ O ║║ ║ └─┼─┘ ║-- ║≈≈≈║~~~║═══
║ ░╚═══╝║ ║ ║[■]║≈≈≈║~~~║ ║
  ░ ░ ░░ ║║ ║▒▒═╬═▒▒║▒▒═╬═▒▒║
║ ░░░<>░░║╚═══╧═══—═══╧═══╩═══╧═══
    </pre>
    
    <div id="ascii-bg"></div>
    
    <div class="zoom-wrapper" id="zoomWrapper">
      <div class="container">
        <div class="profile">
          <img src="https://i.imgur.com/3WKYEMA.png" class="rounded-full w-32 h-32 mx-auto ring-2" alt="Profile Picture">
          <h1 class="text-3xl font-bold mt-4 text-white">cdr-x</h1>
          <p class="text-gray-400">Connect with me across the web</p>
        </div>
        <div class="links mt-8 space-y-4 px-4">
          <a href="https://github.com/cdr-x" target="_blank" rel="noopener noreferrer" class="flex items-center justify-center p-4 rounded transform hover:scale-105 transition duration-300">
            <ion-icon name="logo-github" class="text-2xl"></ion-icon>
            <span class="ml-2">GitHub</span>
          </a>
          <a href="https://open.spotify.com/user/1212791207" target="_blank" rel="noopener noreferrer" class="flex items-center justify-center p-4 rounded transform hover:scale-105 transition duration-300">
            <ion-icon name="musical-notes" class="text-2xl"></ion-icon>
            <span class="ml-2">Spotify</span>
          </a>
          <a href="https://steamcommunity.com/id/gollvm" target="_blank" rel="noopener noreferrer" class="flex items-center justify-center p-4 rounded transform hover:scale-105 transition duration-300">
            <ion-icon name="logo-steam" class="text-2xl"></ion-icon>
            <span class="ml-2">Steam</span>
          </a>
        </div>
      </div>
    </div>

    <script>
      // Auto-zoom function - card only (background stays fixed)
      function calculateAndApplyZoom() {
        const zoomWrapper = document.getElementById('zoomWrapper');
        const container = document.querySelector('.container');
        const availableHeight = window.innerHeight - 64;
        const containerHeight = container.offsetHeight;
        const scale = availableHeight / containerHeight;
        zoomWrapper.style.transform = `scale(${scale})`;
        setTimeout(() => {
          zoomWrapper.classList.add('loaded');
        }, 100);
        return scale;
      }

      // FIXED GRID ASCII Background - Grid layout, no rotation
      function createOptimizedAsciiBackground() {
        const pre = document.getElementById('asciiArt');
        const lines = pre.textContent.split('\n').filter(line => line.trim() !== '');
        const fontSize = 14;
        const lineHeight = 16;
        const charWidth = 9;
        const numLines = lines.length;
        const maxChars = Math.max(...lines.map(line => line.length));
        const tileWidth = maxChars * charWidth;
        const tileHeight = numLines * lineHeight;

        const asciiBg = document.getElementById('ascii-bg');
        asciiBg.innerHTML = '';

        let masterSvgContent = `<style>
          @keyframes glitch1 {0%,100%{transform:translate(0,0);}20%{transform:translate(-1px,0);}21%{transform:translate(0,0);}40%{transform:translate(1px,0);}41%{transform:translate(0,0);}}
          @keyframes glitch2 {0%,100%{opacity:1;}30%{opacity:.6;}31%{opacity:1;}60%{opacity:.8;}61%{opacity:1;}}
          @keyframes glitch3 {0%,100%{transform:translate(0,0);}50%{transform:translate(0,-1px);}51%{transform:translate(0,0);}70%{transform:translate(0,1px);}71%{transform:translate(0,0);}}
          @keyframes flicker {0%,98%{opacity:0;}98.5%{opacity:1;}100%{opacity:0;}}
          @keyframes scanline {0%{transform:translateY(-100%);}100%{transform:translateY(100%);}}
          @keyframes purpleCycle {0%{fill:#d92cff;}20%{fill:#b03df7;}40%{fill:#c28ffd;}60%{fill:#7a44aa;}80%{fill:#ff9ffd;}100%{fill:#d92cff;}}
          .scanline{fill:rgba(255,255,255,.03);animation:scanline 4s linear infinite;}
          .eye.clicked{animation:glitch2 .3s infinite;}
          .egg.clicked text{fill:#ff4444;animation:glitch1 .4s infinite;}
        </style><rect width="100%" height="1" class="scanline" y="-1"/>`;

        // Generate characters ONCE
        lines.forEach((line, lineIndex) => {
          [...line].forEach((char, charIndex) => {
            const x = charIndex * charWidth;
            const y = (lineIndex + 1) * lineHeight - 2;
            let fillColor = "#4ade80";
            let style = `opacity:.9;font-family:'Noto Sans Mono',monospace;font-size:${fontSize};`;
            
            if (char === '(' || char === ')') {
              fillColor = "#0099FF";
              style += "text-shadow:0 0 3px #0099FF;";
            } else if (char === '◉') {
              fillColor = "#d92cff";
              style += "animation:purpleCycle 3s infinite;";
            } else if (char === 'O') {
              masterSvgContent += `<g class="egg"><text x="${x}" y="${y}" fill="${fillColor}" style="${style}">${char}</text></g>`;
              return;
            }

            if (Math.random() < 0.08) { // Slightly reduced
              const glitchType = ['glitch1','glitch2','glitch3'][Math.floor(Math.random()*3)];
              style += `animation:${glitchType} 4s infinite ${Math.random()*3}s;`;
            }

            const escaped = char.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;');
            if (char === '◉') {
              masterSvgContent += `<g class="eye"><text x="${x}" y="${y}" fill="${fillColor}" style="${style}">${escaped}</text></g>`;
            } else {
              masterSvgContent += `<text x="${x}" y="${y}" fill="${fillColor}" style="${style}">${escaped}</text>`;
            }
          });
        });

        // **GRID LAYOUT** - 4x3 = 12 tiles, perfectly tiled, NO ROTATION
        const cols = 4;
        const rows = 3;
        for (let row = 0; row < rows; row++) {
          for (let col = 0; col < cols; col++) {
            const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
            svg.setAttribute('width', tileWidth);
            svg.setAttribute('height', tileHeight);
            svg.style.cssText = `
              position: absolute;
              left: ${col * tileWidth}px;
              top: ${row * tileHeight}px;
              width: ${tileWidth}px;
              height: ${tileHeight}px;
              opacity: ${0.65 + Math.random() * 0.3};
              will-change: transform;
            `;
            svg.innerHTML = masterSvgContent;
            asciiBg.appendChild(svg);
          }
        }

        // Interactive elements
        setTimeout(() => {
          document.querySelectorAll('.eye, .egg').forEach((el, i) => {
            el.addEventListener('click', () => {
              el.classList.add('clicked');
              setTimeout(() => el.classList.remove('clicked'), 1200);
            });
          });
        }, 300);
      }

      window.addEventListener('load', () => {
        // 1. Create background FIRST (fixed, covers full viewport)
        createOptimizedAsciiBackground();
        
        // 2. THEN apply card zoom (independent of background)
        setTimeout(calculateAndApplyZoom, 50);

        // 3. Resize handling
        let resizeTimeout;
        window.addEventListener('resize', () => {
          clearTimeout(resizeTimeout);
          resizeTimeout = setTimeout(() => {
            createOptimizedAsciiBackground();  // Regenerate grid
            calculateAndApplyZoom();           // Re-apply card scale
          }, 200);
        });

        // 4. Animations
        const colorSequence = ["#181818","#23232a","#2d2a37","#45424a","#7f8a99","#b17435","#915c23","#6c3d13","#d68651","#a05a2c","#ecd4a0","#f1b369","#d92cff","#b03df7","#c28ffd","#7a44aa","#ff9ffd","#f8faff","#ffeefa","#fffbe2","#a0abb5","#3d3d3d","#c59f77","#372f2d","#6a6d8c"];
        const style = document.createElement('style');
        let colorKeyframes = '', cycleKeyframes = '', bgKeyframes = '';
        colorSequence.forEach((color, i) => {
          const p = (i / (colorSequence.length - 1)) * 100;
          colorKeyframes += `${p}% { color: ${color}; }`;
          cycleKeyframes += `${p}% { --cycle-color: ${color}; }`;
          bgKeyframes += `${p}% { background-color: ${color}; }`;
        });
        style.textContent = `
          @keyframes colorCycle { ${colorKeyframes} }
          @keyframes cycleColor { ${cycleKeyframes} }
          @keyframes cycleBg { ${bgKeyframes} }
        `;
        document.head.appendChild(style);

        const links = document.querySelectorAll('.links a');
        links.forEach(link => {
          link.addEventListener('mouseover', () => {
            link.classList.remove('bg-cycle');
            void link.offsetWidth;
            link.classList.add('bg-cycle');
            const icon = link.querySelector('ion-icon');
            if (icon) {
              icon.classList.remove('icon-cycle');
              void icon.offsetWidth;
              icon.classList.add('icon-cycle');
            }
          });
          link.addEventListener('mousedown', () => {
            link.classList.add('click-bg');
            setTimeout(() => link.classList.remove('click-bg'), 200);
          });
        });
      });
    </script>
  </body>
</html>
